{
  "apiVersion": "ray.io/v1",
  "kind": "RayService",
  "metadata": {
    "name": "rayservice-sample"
  },
  "spec": {
    "serveConfigV2": "applications:\n  - name: fruit_app\n    import_path: fruit.deployment_graph\n    route_prefix: /fruit\n    runtime_env:\n      working_dir: \"https://github.com/ray-project/test_dag/archive/78b4a5da38796123d9f9ffff59bab2792a043e95.zip\"\n    deployments:\n      - name: MangoStand\n        num_replicas: 2\n        max_replicas_per_node: 1\n        user_config:\n          price: 3\n        ray_actor_options:\n          num_cpus: 0.1\n      - name: OrangeStand\n        num_replicas: 1\n        user_config:\n          price: 2\n        ray_actor_options:\n          num_cpus: 0.1\n      - name: PearStand\n        num_replicas: 1\n        user_config:\n          price: 1\n        ray_actor_options:\n          num_cpus: 0.1\n      - name: FruitMarket\n        num_replicas: 1\n        ray_actor_options:\n          num_cpus: 0.1\n  - name: math_app\n    import_path: conditional_dag.serve_dag\n    route_prefix: /calc\n    runtime_env:\n      working_dir: \"https://github.com/ray-project/test_dag/archive/78b4a5da38796123d9f9ffff59bab2792a043e95.zip\"\n    deployments:\n      - name: Adder\n        num_replicas: 1\n        user_config:\n          increment: 3\n        ray_actor_options:\n          num_cpus: 0.1\n      - name: Multiplier\n        num_replicas: 1\n        user_config:\n          factor: 5\n        ray_actor_options:\n          num_cpus: 0.1\n      - name: Router\n        num_replicas: 1\n",
    "rayClusterConfig": {
      "rayVersion": "2.41.0",
      "headGroupSpec": {
        "rayStartParams": {},
        "template": {
          "spec": {
            "containers": [
              {
                "name": "ray-head",
                "image": "rayproject/ray:2.41.0",
                "resources": {
                  "limits": {
                    "cpu": 2,
                    "memory": "2Gi"
                  },
                  "requests": {
                    "cpu": 2,
                    "memory": "2Gi"
                  }
                },
                "ports": [
                  {
                    "containerPort": 6379,
                    "name": "gcs-server"
                  },
                  {
                    "containerPort": 8265,
                    "name": "dashboard"
                  },
                  {
                    "containerPort": 10001,
                    "name": "client"
                  },
                  {
                    "containerPort": 8000,
                    "name": "serve"
                  }
                ]
              }
            ]
          }
        }
      },
      "workerGroupSpecs": [
        {
          "replicas": 1,
          "minReplicas": 1,
          "maxReplicas": 5,
          "groupName": "small-group",
          "rayStartParams": {},
          "template": {
            "spec": {
              "containers": [
                {
                  "name": "ray-worker",
                  "image": "rayproject/ray:2.41.0",
                  "resources": {
                    "limits": {
                      "cpu": "1",
                      "memory": "2Gi"
                    },
                    "requests": {
                      "cpu": "500m",
                      "memory": "2Gi"
                    }
                  }
                }
              ]
            }
          }
        }
      ]
    }
  }
}
