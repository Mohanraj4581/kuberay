{
  "apiVersion": "ray.io/v1",
  "kind": "RayJob",
  "metadata": {
    "name": "rayjob-sample"
  },
  "spec": {
    "entrypoint": "python /home/ray/samples/sample_code.py",
    "runtimeEnvYAML": "pip:\n  - requests==2.26.0\n  - pendulum==2.1.2\nenv_vars:\n  counter_name: \"test_counter\"\n",
    "rayClusterSpec": {
      "rayVersion": "2.41.0",
      "headGroupSpec": {
        "rayStartParams": {},
        "template": {
          "spec": {
            "containers": [
              {
                "name": "ray-head",
                "image": "rayproject/ray:2.41.0",
                "ports": [
                  {
                    "containerPort": 6379,
                    "name": "gcs-server"
                  },
                  {
                    "containerPort": 8265,
                    "name": "dashboard"
                  },
                  {
                    "containerPort": 10001,
                    "name": "client"
                  }
                ],
                "resources": {
                  "limits": {
                    "cpu": "1"
                  },
                  "requests": {
                    "cpu": "200m"
                  }
                },
                "volumeMounts": [
                  {
                    "mountPath": "/home/ray/samples",
                    "name": "code-sample"
                  }
                ]
              }
            ],
            "volumes": [
              {
                "name": "code-sample",
                "configMap": {
                  "name": "ray-job-code-sample",
                  "items": [
                    {
                      "key": "sample_code.py",
                      "path": "sample_code.py"
                    }
                  ]
                }
              }
            ]
          }
        }
      },
      "workerGroupSpecs": [
        {
          "replicas": 1,
          "minReplicas": 1,
          "maxReplicas": 5,
          "groupName": "small-group",
          "rayStartParams": {},
          "template": {
            "spec": {
              "containers": [
                {
                  "name": "ray-worker",
                  "image": "rayproject/ray:2.41.0",
                  "resources": {
                    "limits": {
                      "cpu": "1"
                    },
                    "requests": {
                      "cpu": "200m"
                    }
                  }
                }
              ]
            }
          }
        }
      ]
    }
  }
}
